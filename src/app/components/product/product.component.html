<div class="container mt-5">
    <!-- Card Container -->
    <div class="card">
        <div class="card-body">
            <!-- Header Row: Title and Buttons -->
            <div class="row mb-3">
                <div class="col-md-8">
                    <h5 class="card-title">Product List ({{ dataSource.length }} items)</h5>
                </div>
                <div class="col-md-4 text-right">
                    <!-- Add Product Button -->
                    <button class="btn btn-primary mr-2" (click)="onClickAddProduct()">
                        <i class="bi bi-plus-lg"></i> Add Product
                    </button>
                </div>
            </div>

            <!-- Search Bar -->
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Search..." [(ngModel)]="searchValue"
                    (keyup)="doFilter($event)" />
                <!-- Conditionally Render Clear Search Button -->
                <button *ngIf="searchValue" class="btn btn-secondary mt-2" (click)="clearSearch()">
                    <i class="bi bi-x"></i> Clear Search
                </button>
            </div>

            <!-- Product Table -->
            <table class="table table-hover table-bordered">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col" class="text-center">รูป</th>
                        <th scope="col">ชื่อ</th>
                        <th scope="col">ราคา</th>
                        <th scope="col">จำนวน</th>
                        <th scope="col">หมวดหมู่</th>
                        <th scope="col" class="text-center">จัดการ</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Loop through data rows -->
                    <tr *ngFor="let row of dataSource.data">
                        <!-- Product ID -->
                        <td>{{ row.productid }}</td>

                        <!-- Product Image -->
                        <td class="text-center">
                            <img [src]="
                    row.productpicture != 'noimg.jpg'
                      ? imageUrl + row.productpicture
                      : 'assets/images/nglogo.jpg'
                  " width="60px" class="rounded" />
                        </td>

                        <!-- Product Name -->
                        <td>{{ row.productname | slice: 0:20 }}</td>

                        <!-- Product Price -->
                        <td>฿ {{ row.unitprice | number: '1.2-2' }}</td>

                        <!-- Product Stock -->
                        <td>{{ row.unitinstock | number }} pcs.</td>

                        <!-- Product Category -->
                        <td>{{ row.categoryname }}</td>

                        <!-- Action Buttons (Edit/Delete) -->
                        <td class="text-center">
                            <button class="btn btn-warning btn-sm" (click)="onClickEdit(row)">
                                <i class="bi bi-pencil"></i> Edit
                            </button>
                            &nbsp;&nbsp;
                            <button class="btn btn-danger btn-sm" (click)="onClickDelete(row.productid)">
                                <i class="bi bi-trash"></i> Delete
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- No Records Found Message -->
            <div *ngIf="dataSource.data.length === 0" class="text-center mt-5">
                No records found
            </div>

            <!-- Pagination -->
            <nav>
                <ul class="pagination justify-content-center">
                    <li class="page-item">
                        <a class="page-link" href="#">Previous</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" href="#">1</a>
                    </li>
                    <li class="page-item">
                        <a class="page-link" href="#">Next</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>